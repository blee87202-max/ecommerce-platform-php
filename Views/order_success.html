<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>โ ุชุฃููุฏ ุงูุทูุจ - ุงููุชุฌุฑ ุงูุจุณูุท</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap">
    <link rel="stylesheet" href="../Assets/css/order_success.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Success Animation -->
    <div class="success-animation" id="success-animation">
        <div class="animation-content">
            <div class="checkmark-circle">
                <div class="checkmark"></div>
            </div>
            <h1>๐ ุชู ุชุฃููุฏ ุทูุจู!</h1>
            <p>ุดูุฑุงู ูุซูุชู ุจูุง. ุณูููู ุจุชุฌููุฒ ุทูุจู ุจุฃุณุฑุน ููุช ูููู.</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="order-success-container" id="main-container" style="display: none;">
        <!-- Header -->
        <header class="order-header">
            <div class="header-content">
                <h1><i class="fas fa-check-circle"></i> ุทูุจู ุชู ุชุฃููุฏู ุจูุฌุงุญ</h1>
                <div class="order-meta">
                    <div class="meta-item">
                        <i class="fas fa-hashtag"></i>
                        <span>ุฑูู ุงูุทูุจ: <strong id="order-number">{$orderData.order.order_number}</strong></span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-calendar"></i>
                        <span>ุงูุชุงุฑูุฎ: <strong id="order-date">{$orderData.order.created_at}</strong></span>
                    </div>
                </div>
            </div>
            <div class="status-badge" id="status-badge" style="background-color: {$orderData.status_info.color}">
                <span class="status-icon">{$orderData.status_info.icon}</span>
                <span class="status-text">{$orderData.status_info.name}</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="order-content">
            <!-- Order Summary -->
            <section class="order-summary-section">
                <h2><i class="fas fa-clipboard-list"></i> ููุฎุต ุงูุทูุจ</h2>
                
                <!-- Order Items -->
                <div class="order-items">
                    <div class="items-header">
                        <h3>ุงูููุชุฌุงุช ุงููุทููุจุฉ</h3>
                        <span class="items-count" id="items-count">{$orderData.items|@count} ููุชุฌ</span>
                    </div>
                    
                    <div class="items-list" id="items-list">
                        {foreach $orderData.items as $item}
                        <div class="order-item">
                            <div class="item-image">
                                <img src="admin/assets/images/{$item.image}" 
                                     alt="{$item.product_name}"
                                     onerror="this.src='admin/assets/images/default.jpg'">
                            </div>
                            <div class="item-details">
                                <h4 class="item-name">{$item.product_name}</h4>
                                <div class="item-price">{$item.formatted_price} ุฌ.ู</div>
                            </div>
                            <div class="item-quantity">
                                <span class="quantity-label">ุงููููุฉ:</span>
                                <span class="quantity-value">{$item.quantity}</span>
                            </div>
                            <div class="item-total">
                                <span class="total-label">ุงููุฌููุน:</span>
                                <span class="total-value">{$item.formatted_subtotal} ุฌ.ู</span>
                            </div>
                        </div>
                        {/foreach}
                    </div>
                </div>

                <!-- Order Totals -->
                <div class="order-totals">
                    <div class="total-row">
                        <span>ุงููุฌููุน ุงูุฌุฒุฆู:</span>
                        <span id="subtotal">{$orderData.totals.formatted_subtotal} ุฌ.ู</span>
                    </div>
                    <div class="total-row">
                        <span>ุงูุดุญู:</span>
                        <span id="shipping">{$orderData.totals.formatted_shipping} ุฌ.ู</span>
                    </div>
                    <div class="total-row">
                        <span>ุงูุถุฑูุจุฉ:</span>
                        <span id="tax">{$orderData.totals.formatted_tax} ุฌ.ู</span>
                    </div>
                    <div class="total-row grand-total">
                        <span>ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
                        <span id="grand-total">{$orderData.totals.formatted_total} ุฌ.ู</span>
                    </div>
                </div>
            </section>

            <!-- Customer & Payment Info -->
            <div class="info-grid">
                <!-- Customer Information -->
                <section class="customer-info-section">
                    <h2><i class="fas fa-user"></i> ูุนูููุงุช ุงูุนููู</h2>
                    <div class="info-card">
                        <div class="info-row">
                            <span class="info-label">ุงูุงุณู:</span>
                            <span class="info-value" id="customer-name">{$orderData.order.customer_name}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุงููุงุชู:</span>
                            <span class="info-value" id="customer-phone">{$orderData.order.phone}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุงูุนููุงู:</span>
                            <span class="info-value" id="customer-address">{$orderData.order.address}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</span>
                            <span class="info-value" id="customer-email">{$orderData.order.user_email}</span>
                        </div>
                    </div>
                </section>

                <!-- Payment & Shipping Info -->
                <section class="payment-info-section">
                    <h2><i class="fas fa-credit-card"></i> ูุนูููุงุช ุงูุฏูุน ูุงูุดุญู</h2>
                    <div class="info-card">
                        <div class="info-row">
                            <span class="info-label">ุทุฑููุฉ ุงูุฏูุน:</span>
                            <span class="info-value" id="payment-method">{$orderData.order.payment_method}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุญุงูุฉ ุงูุฏูุน:</span>
                            <span class="info-value" id="payment-status">{$orderData.order.payment_status}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุดุฑูุฉ ุงูุดุญู:</span>
                            <span class="info-value" id="shipping-company">{$orderData.shipping_info.carrier}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุฑูู ุงูุชุชุจุน:</span>
                            <span class="info-value" id="tracking-number">{$orderData.shipping_info.tracking_number}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ุงูุชุณููู ุงููุชููุน:</span>
                            <span class="info-value" id="estimated-delivery">{$orderData.shipping_info.estimated_delivery}</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Order Status Timeline -->
            <section class="timeline-section">
                <h2><i class="fas fa-history"></i> ุชุชุจุน ุญุงูุฉ ุงูุทูุจ</h2>
                <div class="timeline">
                    <div class="timeline-step {if $orderData.order.status === 'pending'}active{else}completed{/if}">
                        <div class="step-icon">โณ</div>
                        <div class="step-content">
                            <h4>ููุฏ ุงูุงูุชุธุงุฑ</h4>
                            <p>ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ</p>
                        </div>
                    </div>
                    <div class="timeline-step {if in_array($orderData.order.status, ['processing', 'shipped', 'delivered', 'completed'])}completed{elseif $orderData.order.status === 'pending'}pending{/if}">
                        <div class="step-icon">โ๏ธ</div>
                        <div class="step-content">
                            <h4>ููุฏ ุงููุนุงูุฌุฉ</h4>
                            <p>ุฌุงุฑู ุชุฌููุฒ ุทูุจู</p>
                        </div>
                    </div>
                    <div class="timeline-step {if in_array($orderData.order.status, ['shipped', 'delivered', 'completed'])}completed{/if}">
                        <div class="step-icon">๐</div>
                        <div class="step-content">
                            <h4>ุชู ุงูุดุญู</h4>
                            <p>ุทูุจู ูู ุงูุทุฑูู ุฅููู</p>
                        </div>
                    </div>
                    <div class="timeline-step {if in_array($orderData.order.status, ['delivered', 'completed'])}completed{/if}">
                        <div class="step-icon">๐ฆ</div>
                        <div class="step-content">
                            <h4>ุชู ุงูุชุณููู</h4>
                            <p>ูุตู ุทูุจู ุฅูู ูุฌูุชู</p>
                        </div>
                    </div>
                    <div class="timeline-step {if $orderData.order.status === 'completed'}completed{/if}">
                        <div class="step-icon">โ</div>
                        <div class="step-content">
                            <h4>ููุชูู</h4>
                            <p>ุงูุชูู ุงูุทูุจ ุจูุฌุงุญ</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Help Section -->
            <section class="help-section">
                <div class="help-card">
                    <div class="help-icon">โ</div>
                    <div class="help-content">
                        <h3>ูู ุชุญุชุงุฌ ูุณุงุนุฏุฉุ</h3>
                        <p>ุฅุฐุง ูุงู ูุฏูู ุฃู ุงุณุชูุณุงุฑ ุจุฎุตูุต ุทูุจูุ ููุง ุชุชุฑุฏุฏ ูู ุงูุชูุงุตู ูุนูุง</p>
                        <div class="help-actions">
                            <button class="help-btn" onclick="window.location.href='contact.php'">
                                <i class="fas fa-headset"></i> ุชูุงุตู ูุน ุงูุฏุนู
                            </button>
                            <button class="help-btn secondary" onclick="window.location.href='faq.php'">
                                <i class="fas fa-question-circle"></i> ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Actions Footer -->
        <footer class="order-actions">
            <div class="actions-grid">
                <button class="action-btn primary" onclick="window.location.href='Home.php'">
                    <i class="fas fa-store"></i> ุงูุนูุฏุฉ ูููุชุฌุฑ
                </button>
                <button class="action-btn" onclick="window.location.href='my_orders.php'">
                    <i class="fas fa-list-alt"></i> ูุงุฆูุฉ ุงูุทูุจุงุช
                </button>
                <button class="action-btn" onclick="window.print()">
                    <i class="fas fa-print"></i> ุทุจุงุนุฉ ุงููุงุชูุฑุฉ
                </button>
                <button class="action-btn" onclick="downloadInvoice()">
                    <i class="fas fa-download"></i> ุชุญููู ุงููุงุชูุฑุฉ
                </button>
            </div>
            
            <div class="order-note">
                <p><i class="fas fa-info-circle"></i> ุณูููู ุจุฅุฑุณุงู ุชูุงุตูู ุงูุชุชุจุน ุนูู ุจุฑูุฏู ุงูุฅููุชุฑููู ููุฑ ุดุญู ุงูุทูุจ</p>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงูุทูุจ...</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../Assets/js/order_success.js"></script>
</body>
</html>